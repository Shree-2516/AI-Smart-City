<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart City Issue Detector</title>

    <!-- Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
    <div class="container">
        <span class="navbar-brand mb-0 h1">Smart City Issue Detector</span>
    </div>
</nav>

<div class="container my-4 text-center">

    <!-- ACTION BUTTONS -->
    <div class="mb-3">
        <input type="file" id="imageInput" accept="image/*" class="d-none">

        <button class="btn btn-primary me-2" id="uploadBtn">
            Upload Image
        </button>

        <button class="btn btn-secondary" id="cameraBtn">
            Use Camera
        </button>
    </div>

    <!-- HISTORY -->
    <div class="mb-3">
        <a href="/history" class="btn btn-outline-dark">
            View Report History
        </a>
    </div>

    <!-- LOADING -->
    <div id="loading" class="d-none">
        <div class="spinner-border text-primary"></div>
        <p class="mt-2">Processing image...</p>
    </div>

    <!-- CAMERA -->
    <div id="cameraContainer" class="d-none mt-3">
        <video id="camera" class="img-fluid rounded"></video>

        <div class="mt-2">
            <button class="btn btn-success me-2" id="captureBtn">
                Capture Photo
            </button>
            <button class="btn btn-danger" id="closeCameraBtn">
                Close Camera
            </button>
        </div>
    </div>

    <canvas id="captureCanvas" class="d-none"></canvas>

    <!-- OUTPUT -->
    <div id="output" class="d-none">

        <h4 class="mt-4">Detected Issues</h4>

        <img
            id="outputImage"
            class="img-fluid rounded shadow mt-3 result-image"
            alt="Detection Result"
        >

        <p id="summaryText" class="mt-3 fw-semibold"></p>

        <div id="severityBadge" class="severity d-none"></div>

        <div class="chart-container mx-auto mt-3">
            <canvas id="chartCanvas"></canvas>
        </div>

    </div>

</div>

<script src="/static/script.js"></script>
</body>
</html>
